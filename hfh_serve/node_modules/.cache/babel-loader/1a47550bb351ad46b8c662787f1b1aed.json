{"remainingRequest":"C:\\vv\\4th\\VUEUI\\day02\\scaffolding\\node_modules\\babel-loader\\lib\\index.js!C:\\vv\\4th\\VUEUI\\day02\\scaffolding\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\vv\\4th\\VUEUI\\day02\\scaffolding\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\vv\\4th\\VUEUI\\day02\\scaffolding\\src\\views\\Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\vv\\4th\\VUEUI\\day02\\scaffolding\\src\\views\\Main.vue","mtime":1630640935869},{"path":"C:\\vv\\4th\\VUEUI\\day02\\scaffolding\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\vv\\4th\\VUEUI\\day02\\scaffolding\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\vv\\4th\\VUEUI\\day02\\scaffolding\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\vv\\4th\\VUEUI\\day02\\scaffolding\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi92di80dGgvVlVFVUkvZGF5MDIvc2NhZmZvbGRpbmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYXZhY3RpdmU6ICcxJywKICAgICAgaDogJzIxMHB4JywKICAgICAgLy/ova7mkq3lm77pq5jluqYKICAgICAgdHlwZTogW10sCiAgICAgIC8v5L+d5a2Y57G75Yir5YiX6KGoCiAgICAgIGFydGljbGVzOiBbXSwKICAgICAgLy/kv53lrZjmlofnq6DliJfooagKICAgICAgYnVzeTogZmFsc2UsCiAgICAgIC8v5o6n5Yi26YG/5YWN6YeN5aSN6LCD55SobG9hZG1vcmXmlrnms5UKICAgICAgcGFnZTogMSwKICAgICAgaXNTaG93OiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWIneWni+WMlui9ruaSreWbvumrmOW6pgogICAgaW5pdFN3aXBlSGVpZ2h0OiBmdW5jdGlvbiBpbml0U3dpcGVIZWlnaHQoKSB7CiAgICAgIHZhciBwaWN3ID0gMTI0MjsKICAgICAgdmFyIHBpY2ggPSA2OTg7CiAgICAgIHZhciBzY3JlZW53ID0gd2luZG93LnNjcmVlbi53aWR0aDsKICAgICAgdmFyIHN3aXBlaCA9IE1hdGguZmxvb3IocGljaCAqIHNjcmVlbncgLyBwaWN3KSArICdweCc7CiAgICAgIHRoaXMuaCA9IHN3aXBlaDsKICAgIH0sCiAgICAvLyDluK7lv5nlj5Hor7fmsYLvvIzmiornu5Pmnpznu5nlj5Hor7fmsYLogIUKICAgIC8v5bCB6KOF5byC5q2l5Lu75Yqh77yM6ZyA6KaB6L+U5Zue57uT5p6cCiAgICAvL2NhbGxiYWNr5oiW6ICFcHJvbWlzZQogICAgZ2V0QXJ0aWNsZXM6IGZ1bmN0aW9uIGdldEFydGljbGVzKGNpZCwgcGFnZSwgY2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIOW8ueWHuuetieW+heahhgogICAgICAvLyBWdWUudXNlKE1pbnRVSSnml7bvvIzkuLpWdWUucHJvdG90eXBl5rOo5YWl5LqGJGluZGljYXRvcgogICAgICB0aGlzLiRpbmRpY2F0b3Iub3Blbih7CiAgICAgICAgdGV4dDogJ+WKoOi9veS4rS4uLicsCiAgICAgICAgc3Bpbm5lclR5cGU6ICdmYWRpbmctY2lyY2xlJyAvLyBzcGlubmVyVHlwZTonc25ha2UnLAogICAgICAgIC8vIHNwaW5uZXJUeXBlOidkb3VibGUtYm91bmNlJywKICAgICAgICAvLyBzcGlubmVyVHlwZTondHJpcGxlLWJvdW5jZScKCiAgICAgIH0pOwogICAgICB0aGlzLmF4aW9zLmdldCgiL2FydGljbGVzP2NpZD0iLmNvbmNhdChjaWQsICImcGFnZT0iKS5jb25jYXQocGFnZSkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNhbGxiYWNrKHJlcy5kYXRhLnJlc3VsdHMpOwoKICAgICAgICBfdGhpcy4kaW5kaWNhdG9yLmNsb3NlKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOinpuW6leWKoOi9veS4i+S4gOmhtQogICAgbG9hZG1vcmU6IGZ1bmN0aW9uIGxvYWRtb3JlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuYnVzeSA9IHRydWU7IC8v6Ziy5q2i6YeN5aSN6LCD55SobG9hZG1vcmUKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCfliLDlupXkuoYnKTsKCiAgICAgICAgX3RoaXMyLmdldEFydGljbGVzKF90aGlzMi5uYXZhY3RpdmUsICsrX3RoaXMyLnBhZ2UsIGZ1bmN0aW9uIChhcnRpY2xlTGlzdCkgewogICAgICAgICAgaWYgKGFydGljbGVMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdmFyIF90aGlzMiRhcnRpY2xlczsKCiAgICAgICAgICAgIF90aGlzMi5pc1Nob3cgPSBmYWxzZTsKCiAgICAgICAgICAgIChfdGhpczIkYXJ0aWNsZXMgPSBfdGhpczIuYXJ0aWNsZXMpLnB1c2guYXBwbHkoX3RoaXMyJGFydGljbGVzLCBfdG9Db25zdW1hYmxlQXJyYXkoYXJ0aWNsZUxpc3QpKTsKCiAgICAgICAgICAgIF90aGlzMi5idXN5ID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczIuaXNTaG93ID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwgMjAwMCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgdGhpcy5pbml0U3dpcGVIZWlnaHQoKTsgLy8g6I635Y+W57G75Yir5YiX6KGoCgogICAgdGhpcy5heGlvcy5nZXQoJy9jYXRlZ29yeScpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpczMudHlwZSA9IHJlcy5kYXRhLnJlc3VsdHM7IC8vIOWPkemAgWh0dHDor7fmsYLvvIzojrflj5ZVSeexu+WIq+S4i+eahOmmlumhteaWh+eroOWIl+ihqOaVsOaNrgoKICAgICAgX3RoaXMzLmdldEFydGljbGVzKF90aGlzMy5uYXZhY3RpdmUsIF90aGlzMy5wYWdlLCBmdW5jdGlvbiAoYXJ0aWNsZUxpc3QpIHsKICAgICAgICBfdGhpczMuYXJ0aWNsZXMgPSBhcnRpY2xlTGlzdDsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIHdhdGNoOiB7CiAgICBuYXZhY3RpdmU6IGZ1bmN0aW9uIG5hdmFjdGl2ZShuZXd2YWwpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7IC8v5Lya5Yiw6aG26YOoCgogICAgICB0aGlzLnBhZ2UgPSAxOwogICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlOwogICAgICB0aGlzLmdldEFydGljbGVzKG5ld3ZhbCwgdGhpcy5wYWdlLCBmdW5jdGlvbiAoYXJ0aWNsZUxpc3QpIHsKICAgICAgICBfdGhpczQuYXJ0aWNsZXMgPSBhcnRpY2xlTGlzdDsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Main.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 标题栏 -->\r\n    <mt-header fixed title=\"首页\">\r\n      <div slot=\"right\" v-if=\"$store.state.isLogin\">\r\n        欢迎:{{$store.state.username}}\r\n      </div>\r\n      <div slot=\"right\" v-else>\r\n        <router-link class=\"link\" to=\"/login\">登录</router-link>\r\n        &nbsp;\r\n        <router-link class=\"link\" to=\"/register\">注册</router-link>\r\n      </div>\r\n    </mt-header>  \r\n      <!-- 导航 -->\r\n      <mt-navbar fixed v-model=\"navactive\">\r\n        <mt-tab-item v-for=\"e of this.type\" :key=\"e.id\" :id=\"`${e.id}`\">{{e.category_name}}</mt-tab-item>\r\n      </mt-navbar>\r\n      <!-- 内容面板组 -->\r\n      <mt-tab-container infinite-scroll-distance=\"100\"\r\n        v-infinite-scroll=\"loadmore\" infinite-scroll-disabled=\"busy\"\r\n        :infinite-scroll-immediate-check=\"true\">\r\n        <mt-tab-container-item >\r\n          <!-- 轮播图 -->\r\n          <mt-swipe :style=\"{height:h}\" \r\n            :auto=\"4000\" \r\n            :speed=\"200\"\r\n            :showIndicators=\"true\"\r\n            :continuous =\"true\"\r\n            >\r\n      <mt-swipe-item><img src=\"/img/1.jpg\" alt=\"\"></mt-swipe-item>\r\n      <mt-swipe-item><img src=\"/img/2.jpg\" alt=\"\"></mt-swipe-item>\r\n      <mt-swipe-item><img src=\"/img/3.jpg\" alt=\"\"></mt-swipe-item>\r\n    </mt-swipe>\r\n        <!-- 单一文章信息开始 -->\r\n        <div class=\"articleItem\" v-for=\"(item,i) in articles\" :key=\"i\">\r\n            <router-link :to=\"`/article/${item.id}`\">\r\n            <!-- 文章标题开始 -->\r\n            <div class=\"articleItem-header\">{{item.subject}}</div>\r\n            <!-- 文章标题结束 -->\r\n            <!-- 文章图文信息开始 -->\r\n            <div class=\"articleItem-wrapper\">\r\n              <!-- 文章图像开始  -->\r\n              <div class=\"articleImg\">\r\n                <img v-show=\"item.image!=null\" :src=\"`/img/articles/${item.image}`\" />\r\n              </div>\r\n              <!-- 文章图像结束 -->\r\n              <!-- 文章简介开始 -->\r\n              <div class=\"articleDes\">\r\n                {{item.description}}\r\n              </div>\r\n              <!-- 文章简介结束 -->\r\n            </div>\r\n            <!-- 文章图文信息结束 -->\r\n            </router-link>\r\n        </div>\r\n        <!-- 单一文章信息结束 -->\r\n        <div v-show=\"isShow\">\r\n          <div class=\"articleItem-header\" style=\"text-align:center;line-height:50px;color:#666\">\r\n            呀~！俺也是有底线的！\r\n          </div>\r\n        </div>\r\n          </mt-tab-container-item>\r\n      </mt-tab-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n      return {\r\n        navactive:'1',\r\n        h:'210px',//轮播图高度\r\n        type:[],//保存类别列表\r\n        articles:[],//保存文章列表\r\n        busy:false,//控制避免重复调用loadmore方法\r\n        page:1,\r\n        isShow:false\r\n      }\r\n  },\r\n  methods:{\r\n    // 初始化轮播图高度\r\n    initSwipeHeight(){\r\n      let picw = 1242;\r\n      let pich = 698;\r\n      let screenw = window.screen.width;\r\n      let swipeh = Math.floor(pich*screenw/picw) +'px' ;\r\n      this.h = swipeh;\r\n    },\r\n    // 帮忙发请求，把结果给发请求者\r\n    //封装异步任务，需要返回结果\r\n    //callback或者promise\r\n    getArticles(cid,page,callback){\r\n      // 弹出等待框\r\n      // Vue.use(MintUI)时，为Vue.prototype注入了$indicator\r\n      this.$indicator.open({\r\n        text:'加载中...',\r\n        spinnerType:'fading-circle',\r\n        // spinnerType:'snake',\r\n        // spinnerType:'double-bounce',\r\n        // spinnerType:'triple-bounce'\r\n\r\n      })\r\n        this.axios.get(`/articles?cid=${cid}&page=${page}`).then(res=>{        \r\n          callback(res.data.results);\r\n          this.$indicator.close();\r\n      })\r\n    },\r\n    // 触底加载下一页\r\n    loadmore(){\r\n      this.busy = true;//防止重复调用loadmore\r\n      setTimeout(() => {      \r\n        console.log('到底了');\r\n        this.getArticles(this.navactive,++this.page,(articleList)=>{\r\n            if(articleList.length>0){\r\n               this.isShow = false;\r\n               this.articles.push(...articleList);\r\n               this.busy = false;\r\n            }else {\r\n               this.isShow = true;\r\n            }\r\n        })}, 2000);\r\n    }\r\n  },\r\n  mounted(){\r\n    this.initSwipeHeight();\r\n    // 获取类别列表\r\n    this.axios.get('/category').then(res=>{   \r\n    this.type = res.data.results;\r\n      // 发送http请求，获取UI类别下的首页文章列表数据\r\n    this.getArticles(this.navactive,this.page,(articleList)=>{\r\n        this.articles = articleList;\r\n      });\r\n    })\r\n  },\r\n  watch:{\r\n    navactive(newval){\r\n      window.scrollTo(0,0);//会到顶部\r\n      this.page=1;\r\n      this.isShow = false;\r\n      this.getArticles(newval,this.page,(articleList)=>{\r\n        this.articles = articleList;\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.link {\r\n  color: white;\r\n}\r\n.mint-tab-container {\r\n  margin-top: 88px;\r\n  margin-bottom: 53px;\r\n}\r\n.mint-navbar {\r\n  margin-top: 40px;\r\n}\r\n.mint-swipe {\r\n  height: 200px; \r\n}\r\n.mint-swipe-item {\r\n  width: 100%;\r\n}\r\n.mint-swipe-item img {\r\n  width: 100%;\r\n}\r\n.articleItem {\r\n  padding: 10px 0;\r\n  margin: 0 10px;\r\n  border-bottom: 1px solid #999;\r\n}\r\n.articleItem-header {\r\n  font-weight: 600;\r\n  font-size: 17px;\r\n  color: #1a1a1a;\r\n  line-height: 22px;\r\n}\r\n.articleItem-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  padding-top: 10px;\r\n  width: 100%;\r\n}\r\n.articleImg {\r\n  margin-right: 15px;\r\n}\r\n.articleImg img {\r\n  width: 112px;\r\n  height: 74px;\r\n  border-radius: 5px;\r\n}\r\n.articleDes {\r\n  height: 65px;\r\n  font-size: 15px;\r\n  overflow: hidden;\r\n  display: -webkit-box;\r\n  font-weight: 400;\r\n  -webkit-line-clamp:3;\r\n  -webkit-box-orient: vertical;\r\n  /* text-overflow: ellipsis; */\r\n  line-height: 21px;\r\n  letter-spacing: normal;\r\n  color: #444;\r\n}\r\n</style>\r\n\r\n\r\n\r\n"],"sourceRoot":"src/views"}]}